---
layout: post
title: 欠驱动机器人整理（一）
date: 2017-7-18
description: a notebook of Underactuated Robotics
categories: [Working]
tags: [underactuated robotics]
mathjax:    true
---
# 1. 全驱动 VS 欠驱动
## 1.1 动机

### 1.1.1 Honda's ASIMO vs. Passive Dyanamic Walkers
1996年，Honda Motor公司公开了他们研发15年的行走机器人ASIMO（Advanced Step in Innovative MObility），如图。咋一看，该机器人运动灵活，但是再仔细分析，会发现虽然运动非常流畅，但是其步态非常不自然，很像航天员穿着太空服在走路，又或者仿佛一个不太会走路的人。ASIMO采用了**高增益反馈(high-gain feedback)**，因此非常多的驱动力矩使得本来很自然的动力学特性消失了，使得机器人严格地根据参考轨迹在运动。与人走路相比，ASIMO需要消耗约20倍的能量。而且只能在一小部分状态空间中保持稳定性。
与ASIMO相反，另外一个行走机器人passive dynamic walker（图）没有任何控制器和执行器，但是能够沿着一个斜坡完全靠重力进行稳定行走。而且，passive dynamic walker的行走步态要比ASIMO更加的自然，更加高效。
从这两个例子可以看出，ASIMO采用**high-gain, dynamics-cancelling feedback approach**并不是必须的，实际上，passive dynamic walker这种形式的运动反而更加漂亮，值得研究。

### 1.1.2 Birds vs. modern aircraft
()

### 1.1.3 The common theme
经典的机器人控制方法认为反馈应该能够用来**overide**机械的动力学。从上面的例子可以得出，我们需要理解如何设计一个控制系统，能够充分利用系统自身的动力学特性，而不是简单的把它们**cancel out**。为此，可以很简单粗暴地减少一些执行机构，或者为执行器加上一些限幅。这样便有了欠驱动系统。


## 1.2 定义
根据牛顿动力学，一个二阶可控动力学系统模型一般有如下形式：

$$
\begin{equation}
\bf{\ddot{q}} = f(\bf{q},\bf{\dot{q}},\bf{u},t)
\end{equation}
$$
其中，$\bf{u}$是控制向量，进一步写成仿射形式：
$$
\begin{equation}
\bf{\ddot{q}} = f_1(\bf{q},\bf{\dot{q}},t)+f_2(\bf{q},\bf{\dot{q}},t) \bf{u}
\end{equation}
$$

> Definition 1. (完全驱动) 
> $$
> \begin{equation}
> rank[f_2(\bf{q},\bf{\dot{q}},t)]=dim[\bf{q}]
> \end{equation}
> $$
>



> Definition 2. (欠驱动) 
> $$
> \begin{equation}
> rank[f_2(\bf{q},\bf{\dot{q}},t)]<dim[\bf{q}]
> \end{equation}
> $$
>



对于欠驱动系统，无法沿着任意方向来加速系统的状态。**换句话说，欠驱动系统无法跟踪任意给定的轨迹。**

当$$dim[\bf{u}]<dim[\bf{q}]$$时，这是一种最普遍的欠驱动情况。

## 1.3 反馈线性化

当系统是全驱动系统时，可以通过某种反馈的方式将非线性变成线性，即存在通解。

但是，欠驱动系统时不能用反馈线性化的方法来解决。因此，控制器的设计者必须要注重思考对象本身的非线性动力学。

## 1.4 典型的欠驱动机器人系统

#### a. 足型机器人（Legged robots）:

#### b. (most)水下或空中机器人（Swimming and flying robots）:

#### c. (often)操作机器人(Robot manipulation):

------



# 2. 单摆模型
## 2.1 为什么选择研究单摆
## 2.2 有/没有一个固定力矩的单摆非线性系统,图示分析
### 2.2.1 过阻尼
因为阻尼项太强，使得系统看起来变成了一阶系统。
三种局部稳定：
#### a. 局部Lyapunov稳定：（不一定收敛到固定点，但肯定不发散）
#### b. 局部渐进稳定：（当$ t \to \infty $时，收敛到固定点）
#### c. 局部指数稳定：（按指数级数收敛到固定点，即有限时间收敛）
几个概念：
#### a. basin of attraction
#### b. separatrix

### 2.2.2 欠阻尼
系统明显表现出二阶特性。没有一个外加力矩的欠阻尼单摆可以看成一个保守系统，能量守恒。
同时，一般可以通过将状态量乘以二，来将二阶系统变为一阶系统。

phase portrait

### 2.2.2 标准阻尼

## 2.3 欠阻尼单摆模型
当对执行器（力矩）引入约束限制时，单摆就变成了一个欠驱动问题。

------

# 3. 体操机器人和车摆系统（The Acrobot and Cart-Pole）
## 3.2 体操机器人
为了解决swing-up问题，需要分析驱动自由度和非驱动自由度之间的状态依附关系。
## 3.3 车摆系统
## 3.4 平衡
首先针对这两个系统设计线性控制器，当它们在非稳定状态点的邻域内时，能够保持平衡。
方法：在平衡点处模型线性化，可控性检测，设计二次线性调节器（LQR）
### 3.4.1 线性化
### 3.4.2 线性系统的可控性
#### 没有重复特征根的情况
#### 一般情况
#### 可控性 vs. 欠驱动
体操机器人和车摆系统在竖直状态的线性模型都是可控的。
**欠驱动系统并不一定就是一个不可控系统**
欠驱动系统虽然不能沿着任意轨迹运动，但是并不等于它们不能到达状态空间中的任一状态点，只不过，在到达指定状态前的轨迹可能是非常复杂的。
### 3.4.3 LQR 反馈控制
可控性说的是到达固定状态点的轨迹是存在的，但是没有说是哪一条或者该如何设计控制输入。因为，可能存在着无数条这样的轨迹，我们需要从中挑出一条来。
LQR就是二次性能下的最优反馈控制器，又称最优线性二次调节器。
需要注意的是，LQR对于线性系统是最优的，但是对于最大化固定点的**basin of attraction**却不一定是最好的线性控制器。有时候，因为综合考虑了线性模型和非线性模型的差别，robust control会得到比LQR更好的结果。

## 3.5 部分反馈线性化
前面说，欠驱动系统系统不能够反馈线性化，其实说的是不能完全反馈线性化，因为我们仍然可以对其中一部分进行反馈线性化。
以车摆系统为例，车的运动会受到摆的影响。如果了解了这个运动，我们似乎就可以设计一种反馈控制器来推车并可以严格地消除摆运动的影响，即线性化小车的运行。
我们用collocated PFL来表示该控制器是线性化驱动关节，noncollocated来表示线性化非驱动关节。
### 3.5.1 PFL for 车摆系统
#### a. Collocated
对于车摆系统，作用力f可以直接对小车的位置x产生加速度，因此如果反馈控制器是对$\ddot{x}$进行线性化，则称 collocated.
#### b. Non-collocated
同样地，如果反馈控制器是对摆的摆角$\ddot{\theta}$进行线性化，则称 non-collocated.
### 3.5.2 PFL的一般形式
